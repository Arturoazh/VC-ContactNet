<div id="sectionContactNets" class="cardsLayout" layout="row" layout-fill layout flex style="overflow-y: scroll;">

		<section flex>

				<div ng-if="$cnRules.rules.length" class="md-item md-whiteframe-z1" ng-repeat="(k, v) in $cnRules.rules track by $index" ng-class="{'open-item': v.openCard}">
					<md-list-item ng-show="v.id" class="item" flex aria-label="row" md-ink-ripple class="md-clickable" cnRuleInfo="{{v}}" cn-open-rules>
						<div flex>{{v.name}}</div>
						<span flex></span>
						<md-icon ng-if="v.channelId == 1" md-svg-icon="phone" aria-label="Open Chat" class="greenVC-color"></md-icon>
						<md-icon ng-if="v.channelId == 2" md-svg-icon="message" aria-label="Open Chat" class="greenVC-color"></md-icon>
						<md-icon ng-if="v.channelId == 3" md-svg-icon="mail" aria-label="Open Chat" class="greenVC-color"></md-icon>

						<md-menu class="md-secondary" >
		          <md-button aria-label="Open menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">
		            <md-icon md-menu-origin md-svg-icon="more_vert"></md-icon>
		          </md-button>
		          <md-menu-content width="4" >
		            <md-menu-item >
		              <md-button ng-click="">
		                  <div layout="row">
		                  	<md-icon md-menu-align-target md-svg-icon="mail"></md-icon>
		                    <p flex>Editar</p>
		                  </div>
		              </md-button>
		            </md-menu-item>
		            <md-menu-item >
		              <md-button ng-click="">
		                  <div layout="row">
		                  	<md-icon md-menu-align-target md-svg-icon="mail"></md-icon>
		                    <p flex>Eliminar</p>
		                  </div>
		              </md-button>
		            </md-menu-item>
		          </md-menu-content>
		        </md-menu>

					</md-list-item>

					<md-progress-linear md-mode="indeterminate" ng-if="v.openCard && !v.downloadedData"></md-progress-linear>

					<div class="item-card" ng-if="v.downloadedData" layout="column" layout-fill>
						<div layout-xs="column" layout-gt-xs="row" layout-padding ng-show="!loadingCards.length">

							<div flex layout="column" layout-align="start">
								<div style="overflow-y:auto;" layout="row">
									<md-input-container flex>
						        <label>Nombre de la regla</label>
						        <input ng-model="v.name">
						      </md-input-container>
						      <md-input-container flex>
						        <label>Canal</label>
						        <md-select ng-model="v.channelId">
						        	<md-option  value="1">Voz</md-option>
						          <md-option  value="2">Chat</md-option>
						          <md-option  value="3">Mail</md-option>
						        </md-select>
						      </md-input-container>
								</div>

								<div layout="column">
									<b class="md-body-2">Selección de ContactNet</b>
									<span class="md-caption">Seleccione los ContactNets a los cuales se le entregara la conversación en el caso de cumplirse las condiciones</span>

									<cn-select-order-contact-net cn-rule="v"></cn-select-order-contact-net>
								</div>

								<div layout="column">
									<b class="md-body-2">Condiciones</b>
									<span class="md-caption">Configure las condiciones que se tiene que cumplir para entregar la conversación a los ContactNets seleccionados</span>

									<span class="md-caption" style="margin-top:20px;">Detección de idioma</spana>

									<div flex layout="row" layout-align="start center" style="margin:10px 0;">
										<cn-select-languages cn-rule="v"></cn-select-languages>
									</div>

									<span class="md-caption" style="margin-top:20px;">Categorización</span>

									<div flex layout="row" layout-align="start center" style="margin:10px 0;">
										<cn-categorization flex layout="row" cn-rule="v"></cn-categorization>
									</div>

								</div>

								<div>
									<md-button class="md-accent md-hue-2" ng-click="save(v)">Guardar</md-button>
								</div>

							</div>

						</div>
					</div>

				</div>


				<div ng-if="!$cnRules.rules.length" class="md-whiteframe-z1 empty-section" layout-padding layout="row" layout-align="center">
					<div flex="80" layout="column">
						<md-icon class="md-accent planet-size-icon" md-svg-icon="rules" aria-label="rules"></md-icon>

						<div flex layout="column">
							<h3>No hay ninguna regla guardada, puedes <span class="blueVC-color">crear la primera ahora</span></h3>
							<p>
								Recuerda que necesitarás al menos tener creada una regla por cada canal que acTives en el ContactNet
								<br>
								A continuación le recordamos los canales que tiene contratados
							</p>
						</div>

						<div flex class="channels-section" layout="row" layout-align="space-between">
							<div flex="15" layout="column" >
								<md-icon class="big-icon" md-svg-icon="phone" aria-label="phone"></md-icon>
								<p>Voz</p>
								<a class="blueVC-color">Contratar</a>
							</div>

							<div flex="15" layout="column" >
								<md-icon class="big-icon greenVC-color" md-svg-icon="message" aria-label="message"></md-icon>
								<p>Chat</p>
							</div>

							<div flex="15" layout="column" >
								<md-icon class="big-icon greenVC-color" md-svg-icon="mail" aria-label="mail"></md-icon>
								<p>Mail</p>
							</div>

							<div flex="15" layout="column" >
								<md-icon class="big-icon" md-svg-icon="mail" aria-label="mail"></md-icon>
								<p>Twitter</p>
								<span class="md-caption">Próximamente<span>
							</div>
						</div>

					</div>

				</div>

		</section>

</div>
