<div id=sectionRules class=cardsLayout layout=row layout-fill="" flex="" layout-align=center><section flex=""><md-whiteframe class=filterSearch flex="" layout="" cn-scroll=""><div flex="" layout=row layout-align="center center"><md-icon md-svg-icon=search aria-label=search></md-icon><input type=text ng-model=filterSearch.description placeholder=Buscar flex=""></div></md-whiteframe><div ng-if=$cnRules.rules.length class="md-item md-whiteframe-z1" ng-repeat="(k, v) in $cnRules.rules | filter:{name: filterSearch.description}" ng-class="{'open-item': v.openCard}"><md-list-item ng-show=v.id class=item flex="" aria-label=row md-ink-ripple="" cn-rule-info=v cn-open-rules=""><div flex="" ng-class="{'hText' : v.downloadedData}">{{v.name}}</div><span flex=""></span><md-icon ng-if="v.channelId == 1" md-svg-icon=phone aria-label="Open Chat" class=greenVC-color></md-icon><md-icon ng-if="v.channelId == 2" md-svg-icon=message aria-label="Open Chat" class=greenVC-color></md-icon><md-icon ng-if="v.channelId == 3" md-svg-icon=mail aria-label="Open Chat" class=greenVC-color></md-icon><md-menu class=md-secondary><md-button aria-label="Open menu" class=md-icon-button ng-click=$mdOpenMenu($event)><md-icon md-menu-origin="" md-svg-icon=more_vert></md-icon></md-button><md-menu-content width=4><md-menu-item><md-button cn-rule-info=v cn-open-rules=""><div layout=row><md-icon md-menu-align-target="" md-svg-icon=edit></md-icon><p flex="">Editar</p></div></md-button></md-menu-item><md-menu-item><md-button ng-click=duplicate(v)><div layout=row><md-icon md-menu-align-target="" md-svg-icon=content_copy></md-icon><p flex="">Duplicar</p></div></md-button></md-menu-item><md-menu-item><md-button ng-click=remove(v)><div layout=row><md-icon md-menu-align-target="" md-svg-icon=delete></md-icon><p flex="">Eliminar</p></div></md-button></md-menu-item></md-menu-content></md-menu></md-list-item><md-progress-linear md-mode=indeterminate ng-if="v.openCard && !v.downloadedData"></md-progress-linear><div class=item-card ng-if=v.downloadedData layout=column layout-fill=""><div layout-xs=column layout-gt-xs=row layout-padding="" ng-show=!loadingCards.length><div flex="" layout=column layout-align=start><div layout=row><md-input-container flex=""><label>Nombre de la regla</label> <input ng-model=v.name></md-input-container><md-input-container flex=""><label>Canal</label><md-select ng-model=v.channelId><md-option value=2>Chat</md-option><md-option value=3>Mail</md-option></md-select></md-input-container></div><div cn-routing-rules=vv cn-channel-id=v.channelId cn-vocabulary=v.vocabulary ng-repeat="(kk,vv) in v.routingRules" layout=column flex="" class="md-item md-whiteframe-z1" ng-class="{'openInnerCard md-whiteframe-z3': vv.openCard}"></div><p class="md-caption blueVC-color" ng-if=v.modificable ng-click=addRoutingRule(v)>Añadir regla</p><div flex="" layout=row class=action-buttons><span flex=""></span><md-button class="md-accent md-hue-2" ng-click="v.openCard = false">Cancelar</md-button><span flex=5></span><md-button ng-disabled=!v.modificable class="md-accent md-raised md-hue-2" ng-click=save(v)>Guardar</md-button></div></div></div></div></div><div ng-if="!$cnRules.rules.length && !loading" class="md-whiteframe-z1 empty-section" layout-padding="" layout=row layout-align=center><div flex=80 layout=column><md-icon class="md-accent planet-size-icon" md-svg-icon=rules aria-label=rules></md-icon><div flex="" layout=column><h3>No hay ninguna regla guardada, puedes <span class=blueVC-color ng-click=addNew()>crear la primera ahora</span></h3><p>Recuerda que necesitarás al menos tener creada una regla por cada canal que actives en el ContactNet<br>A continuación le recordamos los canales que tiene contratados</p></div><div flex="" class=channels-section layout=row layout-align=space-between><div flex=20 layout=column><md-icon class=big-icon md-svg-icon=phone aria-label=phone></md-icon><p>Voz</p><a class=blueVC-color>Contratar</a></div><div flex=20 layout=column><md-icon class="big-icon blueVC-color" md-svg-icon=message aria-label=message></md-icon><p>Chat</p></div><div flex=20 layout=column><md-icon class="big-icon blueVC-color" md-svg-icon=mail aria-label=mail></md-icon><p>Mail</p></div></div></div></div><div layout=row layout-padding="" layout-align=space-around ng-if=loading flex="" layout-fill=""><md-progress-circular class=md-accent md-mode=indeterminate md-diameter=80></md-progress-circular></div></section></div>